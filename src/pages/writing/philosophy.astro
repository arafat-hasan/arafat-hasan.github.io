---
/**
 * Philosophy Writing Page
 * Philosophical musings, ethical discussions, thought experiments
 */
import { getCollection } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";
import Navbar from "../../components/Navbar.astro";
import Footer from "../../components/Footer.astro";
import CategoryFilter from "../../components/writing/CategoryFilter.astro";
import WritingList from "../../components/writing/WritingList.astro";
import BrowseTagsButton from "../../components/writing/BrowseTagsButton.astro";
import { WRITING_CATEGORIES } from "../../config/constants";

const category = "philosophy";
const categoryInfo = WRITING_CATEGORIES[category];

// Get all philosophy writing posts
const posts = await getCollection("writing", ({ data }) => {
  return data.category === category && !data.draft;
});

// Sort by published date (newest first)
const sortedPosts = posts.sort(
  (a, b) => b.data.publishedAt.getTime() - a.data.publishedAt.getTime(),
);
---

<BaseLayout
  title={`${categoryInfo.name} Writing`}
  description={categoryInfo.description}
>
  <Navbar slot="navbar" />

  <div class="mb-8">
    <h1 class="text-3xl sm:text-4xl font-bold text-gray-900 mb-4">
      {categoryInfo.name}
    </h1>
    <p class="text-lg text-gray-600 max-w-2xl">
      {categoryInfo.description}
    </p>
  </div>

  <CategoryFilter currentCategory={category} class="mb-8" />

  <WritingList posts={sortedPosts} />

  <BrowseTagsButton />

  <Footer slot="footer" />
</BaseLayout>
