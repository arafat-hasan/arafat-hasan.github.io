---
/**
 * Homepage - Minimalist Design with Hero Photo
 * Integrates all sections: Writing, Activities, Gallery
 */
import { getCollection } from "astro:content";
import BaseLayout from "../layouts/BaseLayout.astro";
import Navbar from "../components/Navbar.astro";
import Footer from "../components/Footer.astro";
import WritingCard from "../components/writing/WritingCard.astro";
import ActivityCard from "../components/activities/ActivityCard.astro";

// Get latest content from each section
const allWriting = await getCollection("writing", ({ data }) => !data.draft);
const latestWriting = allWriting
  .sort((a, b) => b.data.publishedAt.getTime() - a.data.publishedAt.getTime())
  .slice(0, 3);

const allActivities = await getCollection("activities");
const latestActivity = allActivities.sort(
  (a, b) => b.data.date.getTime() - a.data.date.getTime(),
)[0];

const allPhotos = await getCollection("gallery");
const featuredPhotos = allPhotos
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
  .slice(0, 4);
---

<BaseLayout
  title="Arafat Hasan - Software Engineer & Adventurer"
  description="SSoftware engineer, multidisciplinary thinker and critic, outsider observer."
>
  <Navbar slot="navbar" />

  <!-- Hero Section with Photo - Minimalist -->
  <section class="py-16 md:py-24">
    <!-- <div class="grid md:grid-cols-2 gap-12 items-center"> -->
    <!-- Text Content -->
    <div class="order-2 md:order-1">
      <h1
        class="text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 mb-6 leading-tight"
      >
        Arafat Hasan
      </h1>
      <p class="text-xl md:text-2xl text-gray-600 mb-8 leading-relaxed">
        Software engineer, multidisciplinary thinker and critic, outsider
        observer.
      </p>
      <p class="text-lg text-gray-700 mb-10 leading-relaxed">
        I design clear, resilient software, study complex systems, and explore
        the big ideas that shape our world. I build things, break things, and
        try to understand them at their core. Stoic by temperament and critical
        by habit, I move across disciplines to understand the universe from
        first principles. My curiosity spans history, philosophy, politics, and
        great literature—disciplines that sharpen how I think and how I build.
        <br />
        Welcome to my corner of the internet.
      </p>

      <!-- CTA Buttons -->
      <div class="flex flex-wrap gap-4">
        <a
          href="/writing"
          class="px-6 py-3 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors font-medium"
        >
          Read My Writing
        </a>
        <a
          href="/contact"
          class="px-6 py-3 border-2 border-gray-900 text-gray-900 rounded-lg hover:bg-gray-50 transition-colors font-medium"
        >
          Get In Touch
        </a>
      </div>
    </div>

    <!-- Hero Photo -->
    <!-- <div class="order-1 md:order-2">
        <div class="aspect-square md:aspect-[4/5] rounded-2xl overflow-hidden bg-gray-100">
          <img
            src="/images/hero-portrait.jpg"
            alt="Arafat Hasan"
            class="w-full h-full object-cover grayscale hover:grayscale-0 transition-all duration-700"
          />
        </div>
      </div> -->
    <!-- </div> -->
  </section>

  <!-- Latest Writing -->
  {
    latestWriting.length > 0 && (
      <section class="py-16 border-t border-gray-200">
        <div class="flex items-baseline justify-between mb-8">
          <h2 class="text-3xl font-bold text-gray-900">Latest Writing</h2>
          <a
            href="/writing"
            class="text-gray-600 hover:text-gray-900 transition-colors text-sm font-medium"
          >
            View all →
          </a>
        </div>

        <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
          {latestWriting.map((post) => (
            <WritingCard
              title={post.data.title}
              description={post.data.description}
              publishedAt={post.data.publishedAt}
              category={post.data.category}
              slug={post.slug}
              tags={post.data.tags}
              content={post.body}
              featured={post.data.featured}
            />
          ))}
        </div>
      </section>
    )
  }

  <!-- Latest Activity -->
  {
    latestActivity && (
      <section class="py-16 border-t border-gray-200">
        <div class="flex items-baseline justify-between mb-8">
          <h2 class="text-3xl font-bold text-gray-900">Latest Adventure</h2>
          <a
            href="/activities"
            class="text-gray-600 hover:text-gray-900 transition-colors text-sm font-medium"
          >
            View all →
          </a>
        </div>

        <div class="max-w-2xl">
          <ActivityCard
            title={latestActivity.data.title}
            description={latestActivity.data.description}
            date={latestActivity.data.date}
            location={latestActivity.data.location}
            activityType={latestActivity.data.activityType}
            distance={latestActivity.data.distance}
            featuredImage={latestActivity.data.featuredImage}
            slug={latestActivity.slug}
          />
        </div>
      </section>
    )
  }

  <!-- Gallery Preview -->
  {
    featuredPhotos.length > 0 && (
      <section class="py-16 border-t border-gray-200">
        <div class="flex items-baseline justify-between mb-8">
          <h2 class="text-3xl font-bold text-gray-900">Through My Lens</h2>
          <a
            href="/gallery"
            class="text-gray-600 hover:text-gray-900 transition-colors text-sm font-medium"
          >
            View gallery →
          </a>
        </div>

        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
          {featuredPhotos.map((photo) => (
            <a href="/gallery" class="block group">
              <div class="aspect-square rounded-lg overflow-hidden bg-gray-100">
                <img
                  src={photo.data.image}
                  alt={photo.data.alt}
                  class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
                  loading="lazy"
                />
              </div>
            </a>
          ))}
        </div>
      </section>
    )
  }

  <!-- About Preview -->
  <section class="py-16 border-t border-gray-200">
    <div class="max-w-2xl">
      <h2 class="text-3xl font-bold text-gray-900 mb-6">About Me</h2>
      <p class="text-lg text-gray-700 leading-relaxed mb-6">
        I'm a software engineer with 4 years of experience building efficient
        and reliable systems. My expertise spans backend engineering, DevOps,
        and machine learning, with a strong foundation in algorithms and data
        structures.
      </p>
      <p class="text-lg text-gray-700 leading-relaxed mb-8">
        Beyond code, I'm passionate about cycling long distances, capturing
        moments through photography, and writing about technology, philosophy,
        and the experiences that shape our understanding of the world.
      </p>
      <a
        href="/about"
        class="inline-flex items-center text-gray-900 font-medium hover:gap-2 transition-all"
      >
        More about me
        <span class="ml-1">→</span>
      </a>
    </div>
  </section>

  <Footer slot="footer" />
</BaseLayout>
